# 数据库分片

### 复制集
  * 高可用性
  * 数据安全

### 数据库分片
  * 可扩展性

### 纵向扩展
  * 增强单一服务器的性能
  * 简单的架构和运维模型
  * 单一服务器的性能上限

### 横向扩展
  * 增加提供服务的服务器数量
  * 更高的可扩展性
  * 增加架构和运维的复杂度

### 分片集群
  * 每个分片存储一部分数据，可以部署为复制集
  * mongos 路由可以将客户请求发送至相关的分片
  * 配置服务器保存集群配置和元数据，可以部署为复制集

### 主分片
  * 集群中的每个数据库都会选择一个分片作为主分片
  * 主分片存储所有不需要分片的集合
  * 创建数据库时，数据最少的分片被选为主分片

### 分片片键
  * 片键值被用来将集合中的文档划分为数据段
  * 片键必须对应一个索引或索引前缀（单键或复合键）
  * 可以使用片键值的哈希值来生成哈希片键